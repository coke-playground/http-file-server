# Http File Server

本项目是一个基于[coke](https://github.com/kedixa/coke)实现的`Http`文件服务器。

`Workflow`目前(`v0.11.4`)暂未支持异步回复数据流的方式，但可以通过`server_task->push`以伪异步的方式实现该模式，例如可实现`Http Server-Sent Events`。本项目是`coke`框架实现服务器的一个示例，也是`workflow`使用`SSE`模式的一个示例，项目中没有引入晦涩的操作，因此非常适合初学者了解`coke`。


## 待办清单
本项目有部分功能未实现，感兴趣的小伙伴可以从此处开始入手

- [ ] 实现`HTTP HEAD`方法并支持客户端获取文件摘要（如MD5）的请求
    - 该需求可通过`coke::pread`分块读取文件，通过`coke::switch_go_thread`切换到计算线程进行文件摘要的计算，计算完成后填写到`HttpResponse`并回复给客户端
    - 计算摘要可能很耗时，也可以通过项目中回复大文件的方式，每隔一段时间回复一个`Http Header`告知客户端计算仍在进行，请继续等待，在这个过程中如果发现客户端已经关闭了连接（`server_task->push`失败）则可提前结束摘要的计算
- [ ] 实现速度限制的功能
    - 文件服务会占用大量带宽，可以借助`coke::QpsPool`的思想实现回复速度限制的功能，公平地提供服务
- [ ] 实现数据压缩功能
    - 这会同时使用到异步文件读取、切换计算线程压缩、伪异步回复消息三个功能
- [ ] 实现Http Range请求以支持断点续传
    - 这与当前实现的伪异步消息回复过程差不多，可用于再次体验协程在异步逻辑中的便捷之处
- [ ] 当`GET`请求是目录时，跟据`Directory Listing`格式生成回复消息
    - 这可能不涉及异步操作，可用于娱乐

## 构建环境
GCC >= 13

## LICENSE
Apache 2.0
